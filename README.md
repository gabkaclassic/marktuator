# Marktuator

**Marktuator** — это инструмент для автоматической проверки ссылок в Markdown-файлах. Он читает `.md`-файлы из указанной директории, извлекает ссылки и проверяет их доступность через HTTP.

---

## Возможности

- Рекурсивный поиск Markdown-файлов
- Извлечение всех Markdown-ссылок
- Проверка доступности HTTP/HTTPS-ссылок
- Гибкая настройка допустимых HTTP-статусов
- Вывод логов в stdout или в файл (в формате JSON или текстовом)
- Покрытие кода тестами

---

## Установка и сборка

```bash
make build
````

После сборки бинарный файл появится в `build/marktuator`.

---

## Запуск тестов

```bash
make test
```

Команда выполнит все тесты, сбросит кэш и выведет покрытие.

---

## Man-страница

Для генерации man-страницы (требуется `pandoc`):

```bash
make man
man ./marktuator.1
```

---

## Использование

```bash
./build/marktuator -path=./docs -timeout=5 -status=200,302 -log=log.txt -level=info -json=true
```

### Поддерживаемые флаги:

| Флаг       | Описание                                                           |
| ---------- | ------------------------------------------------------------------ |
| `-path`    | Путь к файлу или директории Markdown-файлов (обязателен)           |
| `-timeout` | Таймаут HTTP-запросов в секундах (по умолчанию: 3)                 |
| `-status`  | Разрешённые HTTP-статусы, разделённые запятыми (по умолчанию: 200) |
| `-log`     | Путь к файлу логов. Если не указан — лог пишется в stdout          |
| `-level`   | Уровень логирования (`debug`, `info`, `warn`, `error`)             |
| `-json`    | Включить JSON-формат логов (`true` / `false`)                      |

---

## Примеры

```bash
./build/marktuator -path=content -timeout=10 -status=200,201,302 -level=debug
```

---

## Очистка артефактов сборки

```bash
make clean
```

Удаляет бинарник, покрытие и man-страницу.
